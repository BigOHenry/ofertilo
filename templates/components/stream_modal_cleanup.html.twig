<turbo-stream action="append" target="modal-action-scripts">
    <template>
        <script>
            // Najdi nejvýše zobrazený otevřený modal (Bootstrap 5)
            {
                const modalEl = document.querySelector(".modal.show");
                if (modalEl) {
                    const modalInstance = bootstrap.Modal.getInstance(modalEl);
                    if (modalInstance) {
                        modalInstance.hide();
                    }
                }

                // Odstraň backdropy
                document.querySelectorAll('.modal-backdrop').forEach(b => b.remove());

                // Obnov datagrid (např. Tabulator.js)
                if (window.tabulatorTable) {
                    window.tabulatorTable.replaceData();
                }
            }
        </script>
    </template>
</turbo-stream>